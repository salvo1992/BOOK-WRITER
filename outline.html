<!-- Outline - Struttura del Libro -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Struttura del Libro - Il Vikingo del Web</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="assets/js/navbar.js" defer></script>
    <script src="assets/js/outline.js" defer></script>
</head>
<body>
    <header>
        <h1>Struttura del Libro</h1>
    </header>

    <main>
        <!-- Titolo del Libro -->
        <section class="container">
            <h2>Titolo</h2>
            <input type="text" id="book-title" placeholder="Inserisci o modifica il titolo">
        </section>

        <!-- Indice -->
        <section class="container">
            <h2>Indice</h2>
            <ul id="chapter-list">
                <!-- Capitoli e sotto-capitoli dinamici -->
            </ul>
            <button id="add-chapter" class="btn-secondary">Aggiungi Capitolo</button>
        </section>

        <!-- Introduzione -->
        <section class="container">
            <h2>Introduzione</h2>
            <textarea id="book-introduction" placeholder="Scrivi l'introduzione..."></textarea>
        </section>

        <section class="action">
            <button id="save-outline" class="btn-primary">Salva e Vai alla Scrittura</button>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Il Vikingo del Web. Tutti i diritti riservati.</p>
    </footer>

    <script>
        document.getElementById('save-outline').addEventListener('click', () => {
            const title = document.getElementById('book-title').value;
            const introduction = document.getElementById('book-introduction').value;
            const chapters = Array.from(document.querySelectorAll('#chapter-list li')).map(li => li.textContent);

            const books = JSON.parse(localStorage.getItem("books")) || [];
            const currentIndex = parseInt(localStorage.getItem("currentBookIndex"), 10);

            if (!title) {
                alert("Il titolo non puÃ² essere vuoto.");
                return;
            }

            books[currentIndex] = { ...books[currentIndex], title, introduction, chapters };
            localStorage.setItem("books", JSON.stringify(books));

            window.location.href = 'write.html';
        });

        document.getElementById('add-chapter').addEventListener('click', () => {
            const chapterName = prompt("Nome del nuovo capitolo:");
            if (chapterName) {
                const li = document.createElement('li');
                li.textContent = chapterName;
                document.getElementById('chapter-list').appendChild(li);
            }
        });
    </script>
</body>
</html>

